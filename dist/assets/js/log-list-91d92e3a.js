import{s as e,B as a}from"./main-5556ed53.js";/* empty css                   *//* empty css            *//* empty css               *//* empty css              */import{z as l,A as t,F as s,b as n,I as o,n as r,u as p,v as d,X as i,R as u}from"./element-plus-91dace6c.js";import{d as c,W as m,r as g,al as v,o as b,c as h,a as f,O as y,F as j,M as _,a9 as x,K as I,u as z,G as N,E as w,L as C}from"./vue-9d6ec0a5.js";import{_ as k}from"./vendor-fc624ed7.js";import"./utils-4e9829b0.js";const S={class:"container"},V={class:"handle-box"},$={class:"pagination"},F=k(c({__name:"log-list",setup(c){const k=m({typeNames:[],pageIndex:1,pageSize:10}),F=g([]),L=g(0),O=g();e({url:`${a}/common/event-types`}).then(e=>{O.value=e.data});const A=()=>{var l;(l={page:k.pageIndex,size:k.pageSize,typeNames:k.typeNames.join()||void 0},e({url:`${a}/logs`,method:"get",params:l})).then(e=>{F.value=e.data.list,L.value=e.data.total})};A();const B=()=>{k.pageIndex=1,A()},D=e=>{k.pageIndex=e,A()},E=()=>{A(),n.success("刷新成功")},G=()=>{o.confirm("确定要清空所有日志吗？","提示",{type:"warning"}).then(()=>{e({url:`${a}/logs`,method:"delete"}).then(e=>{n.success("清空成功"),A()})}).catch(()=>{})};return(e,a)=>{const n=l,o=t,c=r,m=p,g=d,A=s,K=v("action");return b(),h("div",null,[f("div",S,[f("div",V,[y(o,{modelValue:k.typeNames,"onUpdate:modelValue":a[0]||(a[0]=e=>k.typeNames=e),placeholder:"操作类型",class:"handle-select mr10",style:{width:"150px"},onChange:B,filterable:"",multiple:"",clearable:""},{default:j(()=>[(b(!0),h(_,null,x(O.value,e=>(b(),w(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),y(c,{type:"primary",icon:z(i),onClick:E},{default:j(()=>[...a[1]||(a[1]=[I("刷新日志",-1)])]),_:1},8,["icon"]),N((b(),w(c,{type:"danger",icon:z(u),onClick:G},{default:j(()=>[...a[2]||(a[2]=[I("清空日志",-1)])]),_:1},8,["icon"])),[[K,void 0,"log:clean"]])]),y(g,{data:F.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:j(()=>[y(m,{prop:"id",label:"ID",width:"55",align:"center"}),y(m,{prop:"user.username",label:"用户",width:"120"}),y(m,{prop:"typeNameLabel",label:"操作类型",width:"120"},{default:j(({row:e})=>{var a,l;return[f("span",null,C(null==(l=null==(a=O.value)?void 0:a.find(a=>a.value===e.typeName))?void 0:l.label),1)]}),_:1}),y(m,{prop:"content",label:"说明"}),y(m,{prop:"occurredOn",label:"操作时间"})]),_:1},8,["data"]),f("div",$,[y(A,{background:"",layout:"total, prev, pager, next","current-page":k.pageIndex,"page-size":k.pageSize,total:L.value,onCurrentChange:D},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-01969005"]]);export{F as default};
