import"./main-d8a860d8.js";/* empty css                  *//* empty css             *//* empty css                    *//* empty css              *//* empty css            */import{g as e,d as a,c as l,a as t,m as o}from"./storage-ad51fa78.js";import{C as d,D as s,Y as u,H as n,Z as c,I as r,b as i,n as m,u as p,W as f,v as b,J as y,K as V,L as h,w as _,N as k,Q as g,R as v}from"./element-plus-91dace6c.js";import{d as O,r as C,W as L,al as S,o as K,c as U,a as w,G as A,E as j,F as N,K as B,u as E,O as P,L as x,J as D}from"./vue-9d6ec0a5.js";import{_ as I}from"./vendor-fc624ed7.js";import"./utils-4e9829b0.js";var R=Object.defineProperty,T=(e,a,l)=>(((e,a,l)=>{a in e?R(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l})(e,"symbol"!=typeof a?a+"":a,l),l);const z={class:"container"},J={class:"handle-box"},M={class:"dialog-footer"},W={class:"dialog-footer"},F=I(O({__name:"storage-list",setup(O){class I{constructor(){T(this,"id",null),T(this,"endpoint","oss-cn-shanghai.aliyuncs.com"),T(this,"name",""),T(this,"type","OSS"),T(this,"storagePath","files"),T(this,"accessKey",""),T(this,"secretKey",""),T(this,"bucketName",""),T(this,"isDefault",!1),T(this,"address",""),T(this,"createUser",""),T(this,"createTime","")}}const R=C(!1),F=C(!1);let G=L(new I);const H=C([]),Q=()=>{e().then(e=>{H.value=e.data})};Q();const Y=()=>{switch(G.type){case"OSS":Object.assign(G,{endpoint:"oss-cn-shanghai.aliyuncs.com"});break;case"OBS":Object.assign(G,{endpoint:"obs.cn-north-4.myhuaweicloud.com"});break;default:Object.assign(G,{endpoint:""})}},Z=()=>{l(G).then(e=>{Q(),i.success("新增成功"),R.value=!1})},q=()=>{t(G.id||-1,G).then(e=>{Q(),i.success("修改成功"),F.value=!1})};return(e,l)=>{const t=m,O=p,C=d,L=s,T=f,X=b,$=y,ee=V,ae=u,le=n,te=c,oe=h,de=_,se=S("action");return K(),U("div",null,[w("div",z,[w("div",J,[A((K(),j(t,{type:"primary",icon:E(k),onClick:l[0]||(l[0]=e=>{R.value=!0,Object.assign(E(G),new I)})},{default:N(()=>[...l[21]||(l[21]=[B(" 新增对象存储 ",-1)])]),_:1},8,["icon"])),[[se,void 0,"storage:create"]])]),P(X,{data:H.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:N(()=>[P(O,{prop:"name",label:"名称",width:"120"}),P(O,{prop:"storageId",label:"标识",align:"center"}),P(O,{prop:"type",label:"类型",width:"120"},{default:N(({row:e})=>[P(C,{class:"ml-2",type:"success"},{default:N(()=>[B(x(e.type),1)]),_:2},1024)]),_:1}),P(O,{prop:"bucketName",label:"Bucket名称"}),P(O,{prop:"endpoint",label:"Endpoint"}),P(O,{prop:"address",label:"访问地址"}),P(O,{prop:"storagePath",label:"存储目录"}),P(O,{prop:"isDefault",label:"默认对象存储"},{default:N(({row:e})=>[e.isDefault?A((K(),j(C,{key:0,effect:"dark",link:""},{default:N(()=>[...l[22]||(l[22]=[B("默认使用",-1)])]),_:1})),[[se,void 0,"storage:markAsDefault"]]):(K(),j(L,{key:1,title:"设为默认?",onConfirm:a=>{o(e.id).then(e=>{Q()})}},{reference:N(()=>[P(t,{link:""},{default:N(()=>[...l[23]||(l[23]=[B("设为默认",-1)])]),_:1})]),_:1},8,["onConfirm"]))]),_:1}),P(O,{prop:"createUser",label:"创建人"}),P(O,{prop:"createTime",label:"创建时间"}),P(O,{label:"操作"},{default:N(e=>[P(T,null,{default:N(()=>[A((K(),j(t,{text:"",icon:E(g),onClick:a=>{return l=e.row,G.id=l.id,G.endpoint=l.endpoint,G.name=l.name,G.type=l.type,G.storagePath=l.storagePath,G.accessKey=l.accessKey,G.secretKey=l.secretKey,G.bucketName=l.bucketName,G.isDefault=l.isDefault,G.address=l.address,void(F.value=!0);var l}},{default:N(()=>[...l[24]||(l[24]=[B(" 编辑 ",-1)])]),_:1},8,["icon","onClick"])),[[se,void 0,"storage:update"]]),A((K(),j(t,{text:"",icon:E(v),class:"red",onClick:l=>{return t=e.row,void r.confirm("确定要删除吗？","提示",{type:"warning"}).then(()=>{a(t.id).then(e=>{Q(),i.success("删除成功")})}).catch(()=>{});var t}},{default:N(()=>[...l[25]||(l[25]=[B(" 删除 ",-1)])]),_:1},8,["icon","onClick"])),[[se,void 0,"storage:delete"]])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),P(de,{title:"新增",modelValue:R.value,"onUpdate:modelValue":l[10]||(l[10]=e=>R.value=e),width:"35%"},{footer:N(()=>[w("span",M,[P(t,{onClick:l[9]||(l[9]=e=>R.value=!1)},{default:N(()=>[...l[30]||(l[30]=[B("取 消",-1)])]),_:1}),P(t,{type:"primary",onClick:Z},{default:N(()=>[...l[31]||(l[31]=[B("确 定",-1)])]),_:1})])]),default:N(()=>[P(oe,{"label-width":"100px"},{default:N(()=>[P(ee,{label:"名称"},{default:N(()=>[P($,{modelValue:E(G).name,"onUpdate:modelValue":l[1]||(l[1]=e=>E(G).name=e)},null,8,["modelValue"])]),_:1}),P(ee,{label:"类型"},{default:N(()=>[P(le,{modelValue:E(G).type,"onUpdate:modelValue":l[2]||(l[2]=e=>E(G).type=e),size:"small",onChange:Y},{default:N(()=>[P(ae,{label:"OSS"},{default:N(()=>[...l[26]||(l[26]=[B("阿里云 OSS",-1)])]),_:1}),P(ae,{label:"OBS"},{default:N(()=>[...l[27]||(l[27]=[B("华为云 OBS",-1)])]),_:1}),P(ae,{label:"S3"},{default:N(()=>[...l[28]||(l[28]=[B("其他 S3 协议",-1)])]),_:1}),P(ae,{label:"LOCAL"},{default:N(()=>[...l[29]||(l[29]=[B("本地",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),P(te,{title:"以下所有输入都支持环境变量，使用语法为 {{VARIABLE_NAME}}","show-icon":"",center:"",closable:!1,style:{"margin-bottom":"18px"}}),"LOCAL"!==E(G).type?(K(),j(ee,{key:0,label:"Endpoint"},{default:N(()=>[P($,{modelValue:E(G).endpoint,"onUpdate:modelValue":l[3]||(l[3]=e=>E(G).endpoint=e),placeholder:"对象存储资源的Endpoint"},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:1,label:"Bucket 名称"},{default:N(()=>[P($,{modelValue:E(G).bucketName,"onUpdate:modelValue":l[4]||(l[4]=e=>E(G).bucketName=e),placeholder:"对象存储资源的桶名称"},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:2,label:"AccessKey"},{default:N(()=>[P($,{modelValue:E(G).accessKey,"onUpdate:modelValue":l[5]||(l[5]=e=>E(G).accessKey=e)},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:3,label:"SecretKey"},{default:N(()=>[P($,{modelValue:E(G).secretKey,"onUpdate:modelValue":l[6]||(l[6]=e=>E(G).secretKey=e)},null,8,["modelValue"])]),_:1})):D("",!0),P(ee,{label:"访问地址"},{default:N(()=>[P($,{modelValue:E(G).address,"onUpdate:modelValue":l[7]||(l[7]=e=>E(G).address=e),placeholder:"不填写，则使用厂商地址（本地存储除外）"},null,8,["modelValue"])]),_:1}),P(ee,{label:"存储目录"},{default:N(()=>[P($,{modelValue:E(G).storagePath,"onUpdate:modelValue":l[8]||(l[8]=e=>E(G).storagePath=e),placeholder:"不填写，默认存储到 files 目录下"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),P(de,{title:"新增",modelValue:F.value,"onUpdate:modelValue":l[20]||(l[20]=e=>F.value=e),width:"35%"},{footer:N(()=>[w("span",W,[P(t,{onClick:l[19]||(l[19]=e=>F.value=!1)},{default:N(()=>[...l[36]||(l[36]=[B("取 消",-1)])]),_:1}),P(t,{type:"primary",onClick:q},{default:N(()=>[...l[37]||(l[37]=[B("确 定",-1)])]),_:1})])]),default:N(()=>[P(oe,{"label-width":"100px"},{default:N(()=>[P(ee,{label:"名称"},{default:N(()=>[P($,{modelValue:E(G).name,"onUpdate:modelValue":l[11]||(l[11]=e=>E(G).name=e)},null,8,["modelValue"])]),_:1}),P(ee,{label:"类型"},{default:N(()=>[P(le,{modelValue:E(G).type,"onUpdate:modelValue":l[12]||(l[12]=e=>E(G).type=e),size:"small",onChange:Y},{default:N(()=>[P(ae,{label:"OSS"},{default:N(()=>[...l[32]||(l[32]=[B("阿里云 OSS",-1)])]),_:1}),P(ae,{label:"OBS"},{default:N(()=>[...l[33]||(l[33]=[B("华为云 OBS",-1)])]),_:1}),P(ae,{label:"S3"},{default:N(()=>[...l[34]||(l[34]=[B("其他 S3 协议",-1)])]),_:1}),P(ae,{label:"LOCAL"},{default:N(()=>[...l[35]||(l[35]=[B("本地",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),P(te,{title:"以下所有输入都支持环境变量，使用语法为 {{VARIABLE_NAME}}","show-icon":"",center:"",closable:!1,style:{"margin-bottom":"18px"}}),"LOCAL"!==E(G).type?(K(),j(ee,{key:0,label:"Endpoint"},{default:N(()=>[P($,{modelValue:E(G).endpoint,"onUpdate:modelValue":l[13]||(l[13]=e=>E(G).endpoint=e),placeholder:"对象存储资源的Endpoint"},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:1,label:"Bucket 名称"},{default:N(()=>[P($,{modelValue:E(G).bucketName,"onUpdate:modelValue":l[14]||(l[14]=e=>E(G).bucketName=e),placeholder:"对象存储资源的桶名称"},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:2,label:"AccessKey"},{default:N(()=>[P($,{modelValue:E(G).accessKey,"onUpdate:modelValue":l[15]||(l[15]=e=>E(G).accessKey=e)},null,8,["modelValue"])]),_:1})):D("",!0),"LOCAL"!==E(G).type?(K(),j(ee,{key:3,label:"SecretKey"},{default:N(()=>[P($,{modelValue:E(G).secretKey,"onUpdate:modelValue":l[16]||(l[16]=e=>E(G).secretKey=e)},null,8,["modelValue"])]),_:1})):D("",!0),P(ee,{label:"访问地址"},{default:N(()=>[P($,{modelValue:E(G).address,"onUpdate:modelValue":l[17]||(l[17]=e=>E(G).address=e)},null,8,["modelValue"])]),_:1}),P(ee,{label:"存储目录"},{default:N(()=>[P($,{modelValue:E(G).storagePath,"onUpdate:modelValue":l[18]||(l[18]=e=>E(G).storagePath=e),placeholder:"不填写，默认存储到 files 目录下"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-ed28eaee"]]);export{F as default};
