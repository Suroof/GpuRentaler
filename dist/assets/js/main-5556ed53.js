import{d as e,ad as t,o as a,E as s,F as o,O as l,u as r,au as n,r as i,l as c,av as u,c as d,a as m,K as p,L as h,b as f,aw as g,M as _,a9 as v,I as b,ax as k,J as x,H as y,T,ay as E,az as P,aA as w,aB as L,aC as I}from"./vue-9d6ec0a5.js";import{E as D,b as j,d as C,e as $,f as A,h as O,i as R,j as S,k as V,l as M,m as F,n as z,o as B}from"./element-plus-91dace6c.js";import{a as U}from"./utils-4e9829b0.js";import{_ as N}from"./vendor-fc624ed7.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var q={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const H=e({__name:"App",setup:e=>(e,n)=>{const i=t("router-view");return a(),s(r(D),{locale:r(q)},{default:o(()=>[l(i)]),_:1},8,["locale"])}}),W={},K=function(e,t,a){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,a),e in W)return;W[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(!!a)for(let a=s.length-1;a>=0;a--){const o=s[a];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),t?new Promise((t,a)=>{l.addEventListener("load",t),l.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e())},Y=n("sidebar",{state:()=>({collapse:!1}),getters:{},actions:{handleCollapse(){this.collapse=!this.collapse}}}),G=n("tags",{state:()=>({list:[]}),getters:{show:e=>e.list.length>0,nameList:e=>e.list.map(e=>e.name)},actions:{delTagsItem(e){this.list.splice(e,1)},setTagsItem(e){this.list.push(e)},clearTags(){this.list=[]},closeTagsOther(e){this.list=e},closeCurrentTag(e){for(let t=0,a=this.list.length;t<a;t++){if(this.list[t].path===e.$route.fullPath){t<a-1?e.$router.push(this.list[t+1].path):t>0?e.$router.push(this.list[t-1].path):e.$router.push("/"),this.list.splice(t,1);break}}}}}),J=n("theme",()=>{const e=i(!1),t=()=>{const t=document.documentElement;e.value?(t.classList.add("dark-theme"),t.classList.remove("light-theme")):(t.classList.add("light-theme"),t.classList.remove("dark-theme"))};return{isDark:e,initTheme:()=>{const a=localStorage.getItem("theme");e.value=a?"dark"===a:window.matchMedia("(prefers-color-scheme: dark)").matches,t()},toggleTheme:()=>{e.value=!e.value,t(),localStorage.setItem("theme",e.value?"dark":"light")},applyTheme:t}}),Q=U.create({timeout:5e3});Q.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject()),Q.interceptors.response.use(e=>{if(200===e.status)return e;Promise.reject()},e=>{var t,a,s;return 401===(null==(t=e.response)?void 0:t.status)&&(localStorage.removeItem("token"),ve.push("/login")),j.error(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.message),Promise.reject()});const X="/admin3";function Z(e){return Q({url:`${X}/login`,method:"post",data:e})}const ee=n("basic",{state:()=>({userinfo:{token:localStorage.getItem("token"),userId:null,username:"",avatar:"",credential:{},permissions:[]}}),actions:{setUserinfo(e){this.userinfo=e},fetchUserinfo(){return new Promise((e,t)=>{this.userinfo.userId?e(this):Q({url:`${X}/userinfo`,method:"get"}).then(t=>{this.setUserinfo(t.data),e(t)}).catch(e=>{t(e)})})}}}),te={class:"header"},ae={class:"header-right"},se={class:"header-user-con"},oe={key:0,class:"btn-bell-badge"},le={class:"el-dropdown-link"},re=N(e({__name:"header",setup(e){const n=ee().userinfo,i=n.username,f=n.avatar,g=Y(),_=J(),v=()=>{g.handleCollapse()},b=()=>{_.toggleTheme()};c(()=>{document.body.clientWidth<1500&&v()});const k=u(),x=e=>{"loginout"==e?Q({url:`${X}/logout`,method:"post"}).then(()=>{localStorage.removeItem("token"),k.push("/login")}):"user"==e&&k.push("/user")};return(e,n)=>{const c=t("Expand"),u=R,y=t("Fold"),T=t("Sunny"),E=t("Moon"),P=C,w=S,L=t("arrow-down"),I=$,D=A,j=O;return a(),d("div",te,[m("div",{class:"collapse-btn",onClick:v},[r(g).collapse?(a(),s(u,{key:0},{default:o(()=>[l(c)]),_:1})):(a(),s(u,{key:1},{default:o(()=>[l(y)]),_:1}))]),n[4]||(n[4]=m("div",{class:"logo"},"GPU Rent",-1)),m("div",ae,[m("div",se,[m("div",{class:"theme-toggle",onClick:b},[l(P,{effect:"dark",content:r(_).isDark?"切换到明亮主题":"切换到暗黑主题",placement:"bottom"},{default:o(()=>[r(_).isDark?(a(),s(u,{key:0},{default:o(()=>[l(T)]),_:1})):(a(),s(u,{key:1},{default:o(()=>[l(E)]),_:1}))]),_:1},8,["content"])]),m("div",{class:"btn-bell",onClick:n[0]||(n[0]=e=>r(k).push("/tabs"))},[l(P,{effect:"dark",content:"有2条未读消息",placement:"bottom"},{default:o(()=>[...n[1]||(n[1]=[m("i",{class:"el-icon-lx-notice"},null,-1)])]),_:1},8,["content"]),(a(),d("span",oe))]),l(w,{class:"user-avator",size:30,src:r(f)},null,8,["src"]),l(j,{class:"user-name",trigger:"click",onCommand:x},{dropdown:o(()=>[l(D,null,{default:o(()=>[l(I,{command:"user"},{default:o(()=>[...n[2]||(n[2]=[p("个人中心",-1)])]),_:1}),l(I,{divided:"",command:"loginout"},{default:o(()=>[...n[3]||(n[3]=[p("退出登录",-1)])]),_:1})]),_:1})]),default:o(()=>[m("span",le,[p(h(r(i))+" ",1),l(u,{class:"el-icon--right"},{default:o(()=>[l(L)]),_:1})])]),_:1})])])])}}}),[["__scopeId","data-v-302797ab"]]);function ne(){return Q({url:`${X}/resources/tree`,method:"get"})}function ie(e){return Q({url:`${X}/resources`,method:"post",data:e})}function ce(e,t){return Q({url:`${X}/resources/${e}`,method:"put",data:t})}function ue(e){return Q({url:`${X}/resources/${e}`,method:"delete"})}const de={class:"sidebar"},me=N(e({__name:"sidebar",setup(e){const t=i([]),n=J(),c=f(()=>n.isDark?"rgba(0, 0, 0, 0.95)":"#ffffff"),u=f(()=>n.isDark?"#cccccc":"#606266"),k=f(()=>n.isDark?"#ffffff":"#409eff");Q({url:`${X}/resources/menu`,method:"get"}).then(e=>{t.value=x(e.data,1)});const x=(e,t)=>e.filter(e=>e.parentId===t).map(t=>{let a=x(e,t.id);return{index:t.url,icon:t.icon,title:t.name,subs:0===(null==a?void 0:a.length)?void 0:a}}),y=g(),T=f(()=>y.path),E=Y();return(e,n)=>{const i=R,f=V,g=M,x=F;return a(),d("div",de,[l(x,{class:"sidebar-el-menu","default-active":T.value,collapse:r(E).collapse,"background-color":c.value,"text-color":u.value,"active-text-color":k.value,"unique-opened":"",router:""},{default:o(()=>[(a(!0),d(_,null,v(t.value,e=>(a(),d(_,null,[e.subs?(a(),s(g,{index:e.index,key:e.index},{title:o(()=>[l(i,null,{default:o(()=>[(a(),s(b(e.icon)))]),_:2},1024),m("span",null,h(e.title),1)]),default:o(()=>[(a(!0),d(_,null,v(e.subs,e=>(a(),d(_,null,[e.subs?(a(),s(g,{index:e.index,key:e.index},{title:o(()=>[l(i,null,{default:o(()=>[(a(),s(b(e.icon)))]),_:2},1024),p(" "+h(e.title),1)]),default:o(()=>[(a(!0),d(_,null,v(e.subs,(e,t)=>(a(),s(f,{key:t,index:e.index},{default:o(()=>[l(i,null,{default:o(()=>[(a(),s(b(e.icon)))]),_:2},1024),p(" "+h(e.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(a(),s(f,{key:1,index:e.index},{default:o(()=>[l(i,null,{default:o(()=>[(a(),s(b(e.icon)))]),_:2},1024),p(" "+h(e.title),1)]),_:2},1032,["index"]))],64))),256))]),_:2},1032,["index"])):(a(),s(f,{index:e.index,key:e.index},{title:o(()=>[p(h(null==e?void 0:e.title),1)]),default:o(()=>[l(i,null,{default:o(()=>[(a(),s(b(e.icon)))]),_:2},1024)]),_:2},1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse","background-color","text-color","active-text-color"])])}}}),[["__scopeId","data-v-32fefb9b"]]),pe={key:0,class:"tags"},he={class:"tags-close-box"},fe=N(e({__name:"tags",setup(e){const s=g(),n=u(),i=G(),c=e=>{i.list.some(t=>t.path===e.fullPath)||(i.list.length>=8&&i.delTagsItem(0),i.setTagsItem({name:e.name,title:e.meta.title,path:e.fullPath}))};c(s),k(e=>{c(e)});const f=e=>{"other"===e?(()=>{const e=i.list.filter(e=>e.path===s.fullPath);i.closeTagsOther(e)})():(i.clearTags(),n.push("/"))};return(e,c)=>{const u=t("router-link"),g=t("Close"),b=R,k=t("arrow-down"),T=z,E=$,P=A,w=O;return r(i).show?(a(),d("div",pe,[m("ul",null,[(a(!0),d(_,null,v(r(i).list,(e,t)=>{return a(),d("li",{class:y(["tags-li",{active:(r=e.path,r===s.fullPath)}]),key:t},[l(u,{to:e.path,class:"tags-li-title"},{default:o(()=>[p(h(e.title),1)]),_:2},1032,["to"]),l(b,{onClick:e=>(e=>{const t=i.list[e];i.delTagsItem(e);const a=i.list[e]?i.list[e]:i.list[e-1];a?t.path===s.fullPath&&n.push(a.path):n.push("/")})(t)},{default:o(()=>[l(g)]),_:1},8,["onClick"])],2);var r}),128))]),m("div",he,[l(w,{onCommand:f},{dropdown:o(()=>[l(P,{size:"small"},{default:o(()=>[l(E,{command:"other"},{default:o(()=>[...c[1]||(c[1]=[p("关闭其他",-1)])]),_:1}),l(E,{command:"all"},{default:o(()=>[...c[2]||(c[2]=[p("关闭所有",-1)])]),_:1})]),_:1})]),default:o(()=>[l(T,{size:"small",type:"primary"},{default:o(()=>[c[0]||(c[0]=p(" 标签选项 ",-1)),l(b,{class:"el-icon--right"},{default:o(()=>[l(k)]),_:1})]),_:1})]),_:1})])])):x("",!0)}}}),[["__scopeId","data-v-bf72e7b7"]]),ge={class:"content"},_e=[{path:"/",redirect:"/dashboard"},{path:"/",name:"Home",component:e({__name:"home",setup(e){const n=Y(),i=G();return(e,c)=>{const u=t("router-view");return a(),d(_,null,[l(re),l(me),m("div",{class:y(["content-box",{"content-collapse":r(n).collapse}])},[l(fe),m("div",ge,[l(u,null,{default:o(({Component:e})=>[l(T,{name:"move",mode:"out-in"},{default:o(()=>[(a(),s(E,{include:r(i).nameList},[(a(),s(b(e)))],1032,["include"]))]),_:2},1024)]),_:1})])],2)],64)}}}),children:[{path:"/dashboard",name:"dashboard",meta:{title:"系统首页"},component:()=>K(()=>import("./dashboard-02ac5e7f.js"),["./dashboard-02ac5e7f.js","./echarts-13560ec3.js","./vue-9d6ec0a5.js","./element-plus-91dace6c.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/dashboard-7d470e2f.css","../css/tag-2d610f41.css","../css/col-7b227046.css","../css/card-0d454c14.css"],import.meta.url)},{path:"/users",name:"users",meta:{title:"用户列表"},component:()=>K(()=>import("./user-list-45ee7165.js"),["./user-list-45ee7165.js","./storage-e0907758.js","../css/storage-80010545.css","./organization-8169dc86.js","../css/organization-a88c5cde.css","./vue-9d6ec0a5.js","./element-plus-91dace6c.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/user-list-477e5fbc.css","../css/form-item-07ad9ed1.css","../css/form-354ae6cc.css","../css/radio-group-f02f0d0b.css","../css/col-7b227046.css","../css/pagination-7a57635f.css","../css/tag-2d610f41.css","../css/select-232b51b8.css","../css/input-3bae9aed.css","../css/cropper-5164ddd1.css"],import.meta.url)},{path:"/roles",name:"roles",meta:{title:"角色管理"},component:()=>K(()=>import("./role-list-9b9d08fc.js"),["./role-list-9b9d08fc.js","./organization-8169dc86.js","../css/organization-a88c5cde.css","./element-plus-91dace6c.js","./vue-9d6ec0a5.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/role-list-34b51023.css","../css/form-item-07ad9ed1.css","../css/form-354ae6cc.css","../css/input-3bae9aed.css","../css/card-0d454c14.css","../css/tab-pane-53fbed63.css","../css/tag-2d610f41.css","../css/col-7b227046.css","../css/pagination-7a57635f.css","../css/select-232b51b8.css","../css/radio-group-f02f0d0b.css"],import.meta.url)},{path:"/resources",name:"resources",meta:{title:"权限资源"},component:()=>K(()=>import("./resource-list-957ce81c.js"),["./resource-list-957ce81c.js","./vue-9d6ec0a5.js","./vendor-fc624ed7.js","./element-plus-91dace6c.js","./utils-4e9829b0.js","../css/resource-list-d74538a8.css","../css/form-item-07ad9ed1.css","../css/form-354ae6cc.css","../css/tag-2d610f41.css","../css/select-232b51b8.css","../css/input-3bae9aed.css"],import.meta.url)},{path:"/logs",name:"logs",meta:{title:"系统日志"},component:()=>K(()=>import("./log-list-91d92e3a.js"),["./log-list-91d92e3a.js","./element-plus-91dace6c.js","./vue-9d6ec0a5.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/log-list-caed6e23.css","../css/pagination-7a57635f.css","../css/tag-2d610f41.css","../css/select-232b51b8.css","../css/input-3bae9aed.css"],import.meta.url)},{path:"/storage",name:"storage",meta:{title:"对象存储"},component:()=>K(()=>import("./storage-list-a7f14c9a.js"),["./storage-list-a7f14c9a.js","./storage-e0907758.js","../css/storage-80010545.css","./element-plus-91dace6c.js","./vue-9d6ec0a5.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/storage-list-5cfa39da.css","../css/form-item-07ad9ed1.css","../css/form-354ae6cc.css","../css/radio-group-f02f0d0b.css","../css/input-3bae9aed.css","../css/tag-2d610f41.css"],import.meta.url)},{path:"/tabs",name:"tabs",meta:{title:"tab标签",permiss:"3"},component:()=>K(()=>import("./tabs-a18da7af.js"),["./tabs-a18da7af.js","./element-plus-91dace6c.js","./vue-9d6ec0a5.js","./utils-4e9829b0.js","./vendor-fc624ed7.js","../css/tabs-912b4840.css","../css/tab-pane-53fbed63.css","../css/tag-2d610f41.css"],import.meta.url)},{path:"/user",name:"user",meta:{title:"个人中心"},component:()=>K(()=>import("./user-7a3704be.js"),["./user-7a3704be.js","./vendor-fc624ed7.js","./element-plus-91dace6c.js","./vue-9d6ec0a5.js","./utils-4e9829b0.js","../css/user-e8f7fd0b.css","../css/form-item-07ad9ed1.css","../css/col-7b227046.css","../css/form-354ae6cc.css","../css/input-3bae9aed.css","../css/card-0d454c14.css","../css/cropper-5164ddd1.css"],import.meta.url)}]},{path:"/login",name:"Login",meta:{title:"登录"},component:()=>K(()=>import("./login-904bc948.js"),["./login-904bc948.js","./vue-9d6ec0a5.js","./element-plus-91dace6c.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/login-f33af5b6.css","../css/form-354ae6cc.css"],import.meta.url)},{path:"/403",name:"403",meta:{title:"没有权限"},component:()=>K(()=>import("./403-64145416.js"),["./403-64145416.js","./vue-9d6ec0a5.js","./element-plus-91dace6c.js","./vendor-fc624ed7.js","./utils-4e9829b0.js","../css/403-14f7de95.css"],import.meta.url)}],ve=P({history:w(),routes:_e}),be=L(H);be.use(I()),be.use(ve);J().initTheme();for(const[xe,ye]of Object.entries(B))be.component(xe,ye);const ke=ee();be.directive("action",{mounted(e,t){var a;const s=(null==(a=null==ke?void 0:ke.userinfo)?void 0:a.permissions)||[],o=t.arg||"";s&&!s.includes(o)&&(e.hidden=!0)}}),be.mount("#app");export{X as B,ce as a,G as b,ie as c,ue as d,ne as g,Z as l,Q as s,ee as u};
